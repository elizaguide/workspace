<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibrantly Ã— Everfit Integration - Proof of Concept</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .workout-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .workout-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.2);
        }
        .difficulty-beginner { background: linear-gradient(135deg, #10b981, #059669); }
        .difficulty-intermediate { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .difficulty-advanced { background: linear-gradient(135deg, #ef4444, #dc2626); }
        
        .video-thumbnail {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
        }
        .video-thumbnail::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .video-thumbnail::before {
            content: 'â–¶';
            position: absolute;
            top: 50%;
            left: 55%;
            transform: translate(-50%, -50%);
            z-index: 10;
            font-size: 24px;
            color: #667eea;
        }

        .integration-status {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .api-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .api-connected { background-color: #10b981; }
        .api-disconnected { background-color: #ef4444; }

        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900">

<!-- Header -->
<header class="gradient-bg text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="text-center">
            <h1 class="text-4xl font-bold mb-4">Vibrantly Ã— Everfit Integration</h1>
            <p class="text-xl opacity-90 mb-6">Proof of Concept: AI-Powered Training Video Integration</p>
            
            <!-- API Status -->
            <div class="flex justify-center items-center space-x-6 mb-8">
                <div class="flex items-center">
                    <span class="api-status api-connected integration-status"></span>
                    <span class="text-sm">Everfit API Connected</span>
                </div>
                <div class="flex items-center">
                    <span class="api-status api-connected"></span>
                    <span class="text-sm">Vibrantly Integration Active</span>
                </div>
                <div class="flex items-center">
                    <span class="api-status api-connected"></span>
                    <span class="text-sm">Real-time Sync Enabled</span>
                </div>
            </div>

            <!-- Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                <div class="stat-card rounded-lg p-4">
                    <div class="text-2xl font-bold" id="workout-count">Loading...</div>
                    <div class="text-sm opacity-75">Available Workouts</div>
                </div>
                <div class="stat-card rounded-lg p-4">
                    <div class="text-2xl font-bold" id="program-count">Loading...</div>
                    <div class="text-sm opacity-75">Training Programs</div>
                </div>
                <div class="stat-card rounded-lg p-4">
                    <div class="text-2xl font-bold">210K+</div>
                    <div class="text-sm opacity-75">Everfit Coaches</div>
                </div>
                <div class="stat-card rounded-lg p-4">
                    <div class="text-2xl font-bold">Real-time</div>
                    <div class="text-sm opacity-75">Video Sync</div>
                </div>
            </div>
        </div>
    </div>
</header>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    
    <!-- Demo Controls -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border p-6 mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">ðŸš€ Live Demo Controls</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <button onclick="loadWorkoutCollections()" class="bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                <i data-lucide="download" class="w-5 h-5 inline mr-2"></i>
                Load Workout Collections
            </button>
            <button onclick="loadPrograms()" class="bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors">
                <i data-lucide="play-circle" class="w-5 h-5 inline mr-2"></i>
                Load Training Programs
            </button>
            <button onclick="syncWithVibrantly()" class="bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition-colors">
                <i data-lucide="refresh-cw" class="w-5 h-5 inline mr-2"></i>
                Sync to Vibrantly Dashboard
            </button>
        </div>
    </div>

    <!-- Workout Collections -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            <i data-lucide="zap" class="w-8 h-8 inline text-yellow-500 mr-3"></i>
            Available Workout Collections
        </h2>
        <div id="workout-collections" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Workout cards will be populated by JavaScript -->
        </div>
    </section>

    <!-- Training Programs -->
    <section class="mb-12">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            <i data-lucide="target" class="w-8 h-8 inline text-blue-500 mr-3"></i>
            Training Programs
        </h2>
        <div id="training-programs" class="space-y-6">
            <!-- Programs will be populated by JavaScript -->
        </div>
    </section>

    <!-- Integration Features -->
    <section class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8 mb-12">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6 text-center">
            <i data-lucide="link" class="w-8 h-8 inline text-purple-500 mr-3"></i>
            Integration Features
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                <div class="w-12 h-12 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center mb-4">
                    <i data-lucide="video" class="w-6 h-6 text-green-600"></i>
                </div>
                <h3 class="font-bold text-gray-900 dark:text-white mb-2">Video Library Access</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Direct access to Everfit's exercise video library with YouTube, Vimeo, and custom uploads</p>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mb-4">
                    <i data-lucide="users" class="w-6 h-6 text-blue-600"></i>
                </div>
                <h3 class="font-bold text-gray-900 dark:text-white mb-2">Client Management</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Automatic client sync between Vibrantly and Everfit platforms</p>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center mb-4">
                    <i data-lucide="activity" class="w-6 h-6 text-purple-600"></i>
                </div>
                <h3 class="font-bold text-gray-900 dark:text-white mb-2">Real-time Tracking</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Webhook integration for live workout completion and progress updates</p>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                <div class="w-12 h-12 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center mb-4">
                    <i data-lucide="brain" class="w-6 h-6 text-yellow-600"></i>
                </div>
                <h3 class="font-bold text-gray-900 dark:text-white mb-2">AI Recommendations</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Eliza analyzes workout data to suggest optimal training programs</p>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                <div class="w-12 h-12 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center mb-4">
                    <i data-lucide="heart" class="w-6 h-6 text-red-600"></i>
                </div>
                <h3 class="font-bold text-gray-900 dark:text-white mb-2">Health Integration</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Workout data integrated with blood work, supplements, and health goals</p>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm">
                <div class="w-12 h-12 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center mb-4">
                    <i data-lucide="smartphone" class="w-6 h-6 text-indigo-600"></i>
                </div>
                <h3 class="font-bold text-gray-900 dark:text-white mb-2">Voice Integration</h3>
                <p class="text-gray-600 dark:text-gray-300 text-sm">Voice commands to start workouts, log progress, and get AI coaching tips</p>
            </div>
        </div>
    </section>

    <!-- Technical Implementation -->
    <section class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border p-8">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            <i data-lucide="code" class="w-8 h-8 inline text-green-500 mr-3"></i>
            Technical Implementation
        </h2>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">API Endpoints Used</h3>
                <div class="space-y-3">
                    <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-3">
                        <code class="text-sm text-green-600">/on-demand-workout/get-list-collection</code>
                        <p class="text-xs text-gray-600 dark:text-gray-300 mt-1">Fetch available workout collections</p>
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-3">
                        <code class="text-sm text-blue-600">/programs</code>
                        <p class="text-xs text-gray-600 dark:text-gray-300 mt-1">Get structured training programs</p>
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-3">
                        <code class="text-sm text-purple-600">/add-client-to-workout-collection</code>
                        <p class="text-xs text-gray-600 dark:text-gray-300 mt-1">Assign workouts to users</p>
                    </div>
                </div>
            </div>
            
            <div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Integration Benefits</h3>
                <ul class="space-y-3">
                    <li class="flex items-start space-x-3">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-500 mt-0.5"></i>
                        <span class="text-gray-700 dark:text-gray-300">Access to 210K+ professional coaches</span>
                    </li>
                    <li class="flex items-start space-x-3">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-500 mt-0.5"></i>
                        <span class="text-gray-700 dark:text-gray-300">Extensive video exercise library</span>
                    </li>
                    <li class="flex items-start space-x-3">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-500 mt-0.5"></i>
                        <span class="text-gray-700 dark:text-gray-300">Structured progressive programs</span>
                    </li>
                    <li class="flex items-start space-x-3">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-500 mt-0.5"></i>
                        <span class="text-gray-700 dark:text-gray-300">Real-time workout tracking</span>
                    </li>
                    <li class="flex items-start space-x-3">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-500 mt-0.5"></i>
                        <span class="text-gray-700 dark:text-gray-300">White-label customization options</span>
                    </li>
                </ul>
            </div>
        </div>
    </section>
</div>

<!-- Load the API client -->
<script src="everfit-api-client.js"></script>

<script>
// Initialize the demo
document.addEventListener('DOMContentLoaded', function() {
    lucide.createIcons();
    
    // Auto-load demo data
    setTimeout(() => {
        loadWorkoutCollections();
        loadPrograms();
    }, 1000);
});

// Demo functions using mock data
function loadWorkoutCollections() {
    const container = document.getElementById('workout-collections');
    const countElement = document.getElementById('workout-count');
    
    // In real implementation, this would be: const client = new EverfitAPIClient('your-token');
    // const collections = await client.getWorkoutCollections();
    
    // Using mock data for demo
    const collections = typeof MOCK_WORKOUT_COLLECTIONS !== 'undefined' 
        ? MOCK_WORKOUT_COLLECTIONS 
        : {
            "data": {
                "list": [
                    {
                        "name": "HIIT Strength Circuit",
                        "type": "High Intensity", 
                        "id": "hiit_001",
                        "description": "20-minute high-intensity strength training",
                        "difficulty": "Intermediate",
                        "duration": "20 minutes",
                        "equipment": ["Dumbbells", "Mat"]
                    }
                ],
                "total": 4
            }
        };
    
    countElement.textContent = collections.data.total;
    
    container.innerHTML = collections.data.list.map(workout => `
        <div class="workout-card bg-white dark:bg-gray-800 rounded-2xl shadow-sm border p-6" onclick="playWorkoutDemo('${workout.id}')">
            <div class="video-thumbnail bg-gray-200 dark:bg-gray-700 h-48 mb-4 relative">
                <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop" 
                     alt="${workout.name}" class="w-full h-full object-cover rounded-lg">
            </div>
            
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-bold text-gray-900 dark:text-white">${workout.name}</h3>
                <span class="difficulty-${workout.difficulty?.toLowerCase() || 'beginner'} text-white text-xs px-2 py-1 rounded-full">
                    ${workout.difficulty || 'Beginner'}
                </span>
            </div>
            
            <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">${workout.description}</p>
            
            <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
                <span><i data-lucide="clock" class="w-4 h-4 inline mr-1"></i>${workout.duration}</span>
                <span><i data-lucide="activity" class="w-4 h-4 inline mr-1"></i>${workout.type}</span>
            </div>
            
            ${workout.equipment ? `
                <div class="mt-3 pt-3 border-t border-gray-200 dark:border-gray-600">
                    <p class="text-xs text-gray-500 dark:text-gray-400">Equipment: ${workout.equipment.join(', ')}</p>
                </div>
            ` : ''}
        </div>
    `).join('');
    
    lucide.createIcons();
    showNotification('Workout collections loaded from Everfit API!', 'success');
}

function loadPrograms() {
    const container = document.getElementById('training-programs');
    const countElement = document.getElementById('program-count');
    
    const programs = typeof MOCK_PROGRAMS !== 'undefined' 
        ? MOCK_PROGRAMS 
        : {
            "data": [
                {
                    "id": "program_strength_001",
                    "title": "8-Week Strength Foundation",
                    "description": "Progressive strength training program",
                    "weeks": 8,
                    "total_workouts": 24,
                    "difficulty": "Beginner-Intermediate"
                }
            ]
        };
    
    countElement.textContent = programs.data.length;
    
    container.innerHTML = programs.data.map(program => `
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border p-6">
            <div class="flex items-start justify-between mb-4">
                <div>
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">${program.title}</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">${program.description}</p>
                </div>
                <span class="bg-blue-100 dark:bg-blue-900 text-blue-600 text-sm px-3 py-1 rounded-full">
                    ${program.difficulty}
                </span>
            </div>
            
            <div class="grid grid-cols-3 gap-4 mb-4">
                <div class="text-center">
                    <div class="text-2xl font-bold text-blue-600">${program.weeks}</div>
                    <div class="text-xs text-gray-500 dark:text-gray-400">Weeks</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-600">${program.total_workouts}</div>
                    <div class="text-xs text-gray-500 dark:text-gray-400">Workouts</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-purple-600">${Math.ceil(program.total_workouts / program.weeks)}</div>
                    <div class="text-xs text-gray-500 dark:text-gray-400">Per Week</div>
                </div>
            </div>
            
            <button onclick="assignProgramDemo('${program.id}')" 
                    class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all">
                <i data-lucide="play" class="w-4 h-4 inline mr-2"></i>
                Start Program
            </button>
        </div>
    `).join('');
    
    lucide.createIcons();
    showNotification('Training programs loaded from Everfit API!', 'success');
}

function playWorkoutDemo(workoutId) {
    showNotification(`ðŸŽ¥ Playing workout: ${workoutId}`, 'info');
    // In real implementation, this would launch the video player or redirect to workout
    console.log(`Starting workout: ${workoutId}`);
}

function assignProgramDemo(programId) {
    showNotification(`ðŸ“‹ Program ${programId} assigned to Vishen's Vibrantly dashboard!`, 'success');
    // In real implementation, this would call the API to assign the program
    console.log(`Assigning program: ${programId}`);
}

function syncWithVibrantly() {
    showNotification('ðŸ”„ Syncing workout data with Vibrantly health dashboard...', 'info');
    
    setTimeout(() => {
        showNotification('âœ… Workout data successfully synced to Vibrantly dashboard!', 'success');
        // In real implementation, this would update the health dashboard with new workout data
    }, 2000);
}

function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-full`;
    
    const colors = {
        success: 'bg-green-600 text-white',
        error: 'bg-red-600 text-white', 
        info: 'bg-blue-600 text-white'
    };
    
    notification.className += ` ${colors[type] || colors.info}`;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    // Animate in
    setTimeout(() => {
        notification.classList.remove('translate-x-full');
    }, 100);
    
    // Remove after 4 seconds
    setTimeout(() => {
        notification.classList.add('translate-x-full');
        setTimeout(() => {
            document.body.removeChild(notification);
        }, 300);
    }, 4000);
}

// Simulated webhook handler
function handleEverfitWebhook(eventData) {
    console.log('Received Everfit webhook:', eventData);
    
    switch(eventData.event) {
        case 'client.accessed-app':
            showNotification(`ðŸ‘‹ Client ${eventData.data.firstName} started their workout!`, 'info');
            break;
        case 'client.connected':
            showNotification(`ðŸŽ‰ New client ${eventData.data.firstName} connected!`, 'success');
            break;
        default:
            console.log('Unknown webhook event:', eventData.event);
    }
}

// Demo webhook simulation
setTimeout(() => {
    handleEverfitWebhook({
        event: 'client.accessed-app',
        data: {
            id: 'demo_client_001',
            firstName: 'Vishen',
            lastName: 'Lakhiani'
        },
        timestamp: Date.now()
    });
}, 3000);
</script>

</body>
</html>